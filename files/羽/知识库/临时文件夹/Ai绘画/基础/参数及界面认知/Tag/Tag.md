# Tag Overview
 
```ccard
type: folder_brief_live
```

```
质量前缀+前置画风引导+前置镜头效果+前置光照效果+[带描述的主物+主物的各种次要物+镜头效果和光照]*X+全局光照效果+全局镜头效果+画风滤镜
```
其中，各主物之间优先按预期构图重要度顺序排序，各次要物优先按含主物的联想关系顺序排序，在无明显顺序差异时颜色相同的主物或次要物应靠近。例外在于存在错误元素绑定、需要隔离时，相关元素尽可能互相远离。所有镜头、光照和画风均为可选项，且为避免反应过于复杂而建议各不超过 3 种。
## 权重
`( )` 加权重，这里是1.1倍。括号是可以叠加的，如（(girl)) 加很多权重。1.1*1.1=1.21倍
`[ ]`减权重，一般用的少。减权重也一般就用下面的指定倍数。
`( :1.5)` 指定倍数，这里是1.5倍的权重。还可以 (girl:0.9) 达到减权重的效果

### 部分权重
```
1 girl, white long (messy:1.2) hair, red eyes
```
将专门对 messy 部分赋予 * 1.2 权重，其它部分不受影响

### 注意事项
高权重的元素会在画面中有着更大的占比或更强烈的存在感或更多的数量，是能可观地影响构图的原因之一。
权重过大，导致它在画面中倾向于占有更大的比率、更强的表现，迫使元素与元素被错误地绑定了
非常不建议给出十分离谱的权重值，三个小括号也只有 1.3 左右，而一般来说 1.6 就已经很极端地占据画面了，再高至例如 2.0 只会在大多数情况下让咒语变成**召唤古神**

## 表达
### 单一Tag的描述
这两个高阶语法有着明显的区别，尤其是在高步数下更不可以一概而论。分步描绘的 40 步 A 再加上 40 步 B 最后可能形成一个带有 B 基底特征的 A，但它会表现出明显的分立感。而融合描绘的 40 步 A 再加上 40 步 B 最后将形成简直像是化在一起的融合体
#### 分步描述
##### 形式
1. `[from:to:step]`
2. `[from: :step]` (to 为空)
3. `[:to:step]` (from 为空)
from代表在step之前的Tag,
to代表在step之后的Tag
step表示在多少后转换Tag(step 为大于1的整数时表示步数, 为小于1的正小数时表示总步数的百分比)

	注:分布描述可以进行嵌套
##### 提示
分步描绘不特别擅长细化细节，与其分步描绘不如将细化部分直接写入持续生效的部分。分步描绘更擅长在画面初期建立引导，大幅影响后续构图或画面生成。

需要注意的是，分步描绘具有**视觉延后性**——当要求 AI 在比如第 20 步开始描绘另一个不同的物体时，可能在比如第 24 步(或更晚)才能从人眼视觉上感知到另一个物体勉强出现在画面中。这是因为 AI 看待图片的方式和人眼看待图片的方式不同，在 AI 的认知里图片已经初具新物体的特性的时候，人眼可能依然看不出来。
#### 融合描述
`[A | B]`, 这个可以进行无限延长. `[A | B | C | ...]`
作用是对于形如`[A | B]` 的第一种，AI 将在第一步画 A、第二步画 B、第三步画 A...交替进行。而对于无限延长版，则变为第一步画 A、第二步画 B、第三步画 C...循环往复交替进行。

### 多Tag的表达
长咏唱能加强主体与元素之间的绑定关系、提高不同元素之间的区分度，在有明确绑定需求的情况下优于 pitch 式咏唱；直接咏唱则更擅长处理关系要求不强的情景，往往能营造更多样化的场面；短句式咏唱介于两者之间。

![[Pasted image 20240201122423.png]]
直接咏唱总是难以很好地绑定元素颜色，有两张图片出现了明显的元素颜色错误。而短句式咏唱仍有两张图片出现了明显元素颜色错误，但是错误的视觉占比变小了。长咏唱没有出现明显元素颜色错误，很好地处理了各个颜色与元素的绑定关系。
#### 提示
几点小提示
如果发现括号过多
	不必为每个 prompt 都加上过多小括号来提高权重，如果你发现你真的需要给绝大多数元素都加上四五个小括号才能让你想要的东西确保出现，那么更建议酌情普遍删掉一些括号，拉高 CFG Scale ，比如 12 甚至 14。在极端情况下，给单个 prompt 加上过多权重，可能会导致自由度过小而黑图。

尽量不要重复Tag
	除非明确清楚重复 prompt 意味着什么、且有强烈的对应需求，否则不建议重复输入 prompt。重复输入 prompt 的语义相当复杂，不在入门范畴内
	

## 顺序
prompt 的顺序将影响画面的组织方式，越靠前的 prompt 对构图的影响越“重”，而越靠后的则往往会成为靠前 prompt 的点缀或附加物。顺序对于构图的影响在大多数情况下甚至大于权重的影响。
```
前缀+物1+物1的各种次要物+物2+物2的各种次要物+物3+物3各种次要物+...
```
### 标准顺序公式
将最着重体现的元素靠前摆放，然后是它的细节，再将抽象、全局化、影响极度强烈的 prompt 写在靠后处，例如场景和画风滤镜。
所以我们开始构筑一套简单的人像召唤魔法顺序公式。将上述经验总结为
```
前缀+需要重点突出的物件/背景+人+人物特征/元素+人物动态+服饰整体+服饰细节元素+大背景+背景元素+光照效果+画风滤镜+微小辅助元素+后缀 
```
### Tag间距离
遵循自然语言的表达, 距离较近的词的确更容易产生关联、进行叠加，而更远的则倾向于降低互相的关联性、进而互相隔离。
#### 人造距离
除了改变Tag的顺序, 还可以引入无意义单词来增加Tag间的距离, 但是不要过多添加占位单词, 这会引起奇怪的问题?
#### 一种特殊的距离--零级污染
由于不同的词语之间存在联想, 所以两个看上去完全不同的单词也有可能互联联想. 增大其中一方的权重会在无意间增大另一方的权重. 这种是由于训练来源造成的
##### 优劣
![[Pasted image 20240201174547.png]]

### 特殊用法 BREAK
通过在提示词之间加入“BREAK”关键词，可以打断前后提示词的联系，减少或避免不必要的词汇污染。
eg`,girl and eastern dragon BREAK fur-trimmed kimono,`